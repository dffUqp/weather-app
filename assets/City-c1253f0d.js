import{j as e,F as C,B as r,a as i,u as h,i as b,b as w,c as S,L as W,d as v,e as z,s as L,f as I,N as $}from"./index-3c0067b2.js";import{P as p,u as m,t as u,W as f,I as k}from"./weatherServices-99adf4fe.js";import{T as n,i as g,d as _,a as A,W as H,C as j}from"./WeatherInfo-50b597ad.js";const x={Clear:[{r:0,g:151,b:167},{r:33,g:150,b:243}],Clouds:[{r:61,g:122,b:129},{r:130,g:165,b:193}],Rain:[{r:50,g:73,b:136},{r:19,g:105,b:173}],Snow:[{r:78,g:157,b:221},{r:90,g:179,b:251}],default:[{r:0,g:151,b:167},{r:33,g:150,b:243}]},B=()=>e(C,{children:[...new Array(8)].map((s,a)=>e(p,{sx:{width:"100px",height:"105px",background:"transparent",textAlign:"center",p:"10px"}},a))});function T({lat:s,lon:a,timezone:l}){const{data:d,isRefetching:o}=m("hourlyForecast",()=>f.getHourlyForecast({lat:s,lon:a,units:"metric"}));return e(r,{display:"flex",gap:"10px",width:"320px",flexWrap:"wrap",justifyContent:{sm:"flex-end",xs:"flex-start"},children:o||d==null?e(B,{}):d.map(t=>i(p,{sx:{maxWidth:"100px",width:"100%",height:"105px",background:"transparent",textAlign:"center",p:"10px"},children:[e(n,{children:`${u(t.dt,l,"h:mm a")}`}),i(r,{display:"flex",alignItems:"center",children:[e("img",{src:g(t.icon),alt:"",width:40}),e(n,{children:`${t.temp.toFixed()}째C`})]}),e(n,{fontSize:14,children:t.details})]},t.dt))})}const D=({pathname:s,coord:a})=>{const l=h(c=>b(c,a.lat,a.lon)),d=h(w),o=S(),{data:t,isRefetching:y}=m(["city",s],()=>f.getWeather({units:"metric",...a}),{onSuccess:c=>{o(L(x[c.details]??x.default))}}),F=()=>{if(l){o(v(a));return}o(z(a))};return y||t==null?e(r,{height:"95vh",children:e(W,{})}):i(p,{sx:{marginTop:"24px",p:"20px",display:"flex",width:"100%",alignItems:"flex-start",flexWrap:"wrap",justifyContent:"space-between",gap:"25px",minHeight:"375px"},elevation:2,children:[i(r,{children:[i(r,{display:"flex",alignItems:"start",children:[i(r,{children:[e("img",{src:g(t.icon),alt:"",width:115}),i(r,{display:"flex",borderBottom:"1px solid #D3D3D3",children:[i(n,{fontSize:"24px",maxWidth:"140px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",textTransform:"capitalize",marginRight:1,children:[t.name,","]}),e(n,{fontSize:"24px",children:t.country})]}),e(n,{fontSize:"48px",children:`${t.temp.toFixed()}째C`}),i(r,{display:"flex",columnGap:"5px",color:"white",children:[e(n,{children:`High: ${t.temp_max.toFixed()}째C`}),"|",e(n,{children:`Low: ${t.temp_min.toFixed()}째C`})]})]}),e(k,{onClick:F,disabled:d&&!l,children:l?e(_,{}):e(A,{})})]}),e(H,{mt:2,humidity:t.humidity,speed:t.speed,feels_like:t.feels_like})]}),e(r,{order:{md:0,xs:3},children:i(n,{fontSize:18,children:["Local time: ",`${u(t.dt,t.timezone,"dddd, h:mm a")}`]})}),i(r,{textAlign:{sm:"end",xs:"start"},order:{md:0,xs:2},children:[e(n,{fontSize:18,children:"Hourly Forecast"}),e(T,{lat:t.lat,lon:t.lon,timezone:t.timezone})]})]})},R=D;function M(){const s=I(),a=s.state;return a?e(j,{maxWidth:"xl",children:e(R,{pathname:s.pathname,coord:a})}):e($,{to:"/"})}export{M as default};
